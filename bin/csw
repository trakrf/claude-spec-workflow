#!/bin/bash
# Claude Spec Workflow CLI wrapper

set -e

# Detect installation directory from this script's location
CSW_HOME="$(cd "$(dirname "$(dirname "${BASH_SOURCE[0]}")")" && pwd)"
SCRIPT_DIR="$CSW_HOME/scripts"

usage() {
    cat << EOF
Claude Spec Workflow (csw) - Specification-driven development CLI

Usage: csw <command> [arguments]

Commands:
  spec [name]        Create specification from conversation
  plan <spec-file>   Generate implementation plan
  build              Execute build with progress tracking
  check              Run validation suite (test/lint/build)
  ship <feature>     Create PR and prepare for merge
  archive <feature>  Archive completed feature

Examples:
  csw spec auth-system
  csw plan spec/active/auth-system/spec.md
  csw check
  csw ship auth-system

For more information: https://github.com/trakrf/claude-spec-workflow
EOF
}

case "${1:-}" in
    spec|plan|build|check|ship|archive)
        COMMAND="$1"
        shift
        exec "$SCRIPT_DIR/$COMMAND.sh" "$@"
        ;;
    help|--help|-h)
        usage
        exit 0
        ;;
    --version|-v)
        echo "csw 0.2.2"
        exit 0
        ;;
    "")
        usage
        exit 1
        ;;
    *)
        echo "Error: Unknown command '$1'"
        echo ""
        usage
        exit 1
        ;;
esac
